name: Create Artifact in Generic JFrog

on: [push]

jobs:
  build:
    runs-on: self-hosted
    
    steps:
    - name: Checkout in self-hosted runner
      uses: actions/checkout@v3
    
    - name: Print a Hello workflow   
      run: echo "Hello workflow!"

    - name: Create a zip file
      run: git archive --format=zip --output zip-file.zip main

    - name: Push the corresponding artifact to JFrog
      curl: curl -H "X-JFrog-Art-Api:${{ secrets.JF_ARTIFACTORY_API_KEY }}" -T my-zip-file.zip "https://luistorrescisneros.jfrog.io/artifactory/default-generic-local/${{github.repository}}/zip-file.zip"
